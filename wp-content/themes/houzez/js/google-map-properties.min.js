jQuery(function(e){"use strict";if("undefined"!=typeof houzez_map_properties){if(e("#houzez-properties-map").length>0){var a,o,t,i=null,n=new Array,r=new Array,s="",l=1,p=12,u="",c=0,m=0,d=0,g="no",h="",v="roadmap",z=houzez_vars.admin_url+"admin-ajax.php",_=houzez_vars.user_id,f=houzez_vars.not_found,y=houzez_vars.houzez_rtl,w=houzez_vars.processing_text,I=houzez_vars.compare_url,x=houzez_vars.compare_add_icon,M=houzez_vars.add_compare_text,b=houzez_vars.compare_remove_icon,k=houzez_vars.remove_compare_text,T=houzez_vars.compare_limit,L=(houzez_vars.compare_page_not_found,houzez_vars.for_rent_price_slider),E=parseInt(houzez_vars.search_min_price_range),j=parseInt(houzez_vars.search_max_price_range),D=parseInt(houzez_vars.search_min_price_range_for_rent),P=parseInt(houzez_vars.search_max_price_range_for_rent),A=(parseInt(houzez_vars.get_min_price),parseInt(houzez_vars.get_max_price),houzez_vars.currency_position),B=houzez_vars.currency_symbol,R=houzez_vars.thousands_separator,S=parseInt(houzez_vars.is_halfmap),Z=parseFloat(houzez_vars.default_lat),C=parseFloat(houzez_vars.default_long),H=parseInt(houzez_vars.houzez_default_radius),N=/ipad|iphone|ipod|android|blackberry|webos|iemobile|windows phone/i.test(navigator.userAgent.toLowerCase());y="yes"==y,"undefined"!=typeof houzez_map_options&&(s=houzez_map_options.clusterIcon,l=houzez_map_options.map_cluster_enable,p=houzez_map_options.clusterer_zoom,houzez_map_options.closeIcon,u=houzez_map_options.infoWindowPlac,c=houzez_map_options.marker_spiderfier,g=houzez_map_options.markerPricePins,v=houzez_map_options.map_type,""!=(h=houzez_map_options.googlemap_style)&&(h=JSON.parse(h)));var O={zoom:12,maxZoom:16,disableDefaultUI:!0,scrollwheel:!1,styles:h},F={"&amp;":"&","&quot;":'"',"&#039;":"'","&#8217;":"’","&#038;":"&","&lt;":"<","&gt;":">","&#8216;":"‘","&#8230;":"…","&#8221;":"”","&#8211;":"–","&#8212;":"—"};switch(v){case"hybrid":O.mapTypeId=google.maps.MapTypeId.HYBRID;break;case"terrain":O.mapTypeId=google.maps.MapTypeId.TERRAIN;break;case"satellite":O.mapTypeId=google.maps.MapTypeId.SATELLITE;break;default:O.mapTypeId=google.maps.MapTypeId.ROADMAP}a=new google.maps.Map(document.getElementById("houzez-properties-map"),O),o=new google.maps.LatLngBounds;var W=e=>{if("number"==typeof e){for(var a=(e+="").split("."),o=a[0],t=a.length>1?"."+a[1]:"",i=/(\d+)(\d{3})/;i.test(o);)o=o.replace(i,"$1"+R+"$2");return o+t}return e};e(".houzezMapType").on("click",function(o){o.preventDefault();var t,i=e(this).data("maptype");"roadmap"===(t=i)?a.setMapTypeId(google.maps.MapTypeId.ROADMAP):"satellite"===t?a.setMapTypeId(google.maps.MapTypeId.SATELLITE):"hybrid"===t?a.setMapTypeId(google.maps.MapTypeId.HYBRID):"terrain"===t&&a.setMapTypeId(google.maps.MapTypeId.TERRAIN)}),document.getElementById("listing-mapzoomin")&&(ie=a,google.maps.event.addDomListener(document.getElementById("listing-mapzoomin"),"click",function(){var e=parseInt(ie.getZoom(),10);console.log(e),++e>20&&(e=20),ie.setZoom(e)})),document.getElementById("listing-mapzoomout")&&function(e){google.maps.event.addDomListener(document.getElementById("listing-mapzoomout"),"click",function(){var a=parseInt(e.getZoom(),10);console.log(a),--a<0&&(a=0),e.setZoom(a)})}(a),e("#houzez-gmap-next").on("click",function(){!function(e){for(++m>n.length&&(m=1);!1===n[m-1].visible;)++m>n.length&&(m=1);n[m]&&(n[m].getMap()||0==l||(i.setMaxZoom(1),i.repaint())),google.maps.event.trigger(n[m-1],"click"),null!=n[m-1].getPosition()&&e.panTo(n[m-1].getPosition())}(a)}),e("#houzez-gmap-prev").on("click",function(){!function(e){for(--m<1&&(m=n.length);!1===n[m-1].visible;)--m>n.length&&(m=1);n[m]&&(n[m].getMap()||0==l||(i.setMaxZoom(1),i.repaint())),google.maps.event.trigger(n[m-1],"click"),null!=n[m-1].getPosition()&&e.panTo(n[m-1].getPosition())}(a)});google.maps.event.addListener(a,"tilesloaded",function(){jQuery(".houzez-map-loading").hide()});var $=function(){0!=l&&null!=i&&i.clearMarkers()},q=function(){for(var e=0;e<n.length;e++)n[e].setMap(null);n=[]},Q=function(){a.fitBounds(n.reduce(function(e,a){return e.extend(a.getPosition())},new google.maps.LatLngBounds))},U=function(e,a){if(0!=c)var m=new OverlappingMarkerSpiderfier(a,{markersWontMove:!0,markersWontHide:!0,keepSpiderfied:!0,circleSpiralSwitchover:1/0,nearbyDistance:50});t=function(){for(;r.length>0;){r.pop().close()}};for(var d=function(e,a,o){google.maps.event.addListener(a,"click",function(){t(),o.open(e,a),r.push(o);var i=o.getContent().getElementsByClassName("listing-thumbnail");i.length&&i[0].dataset.src&&(i[0].src=i[0].dataset.src)})},h=0;h<e.length;h++)if(e[h].lat&&e[h].lng){if("yes"==g)var v='<div data-id="'+e[h].property_id+'" class="gm-marker gm-marker-color-'+e[h].term_id+'"><div class="gm-marker-price">'+e[h].pricePin+"</div></div>",z=new RichMarker({map:a,position:new google.maps.LatLng(e[h].lat,e[h].lng),draggable:!1,flat:!0,anchor:RichMarkerPosition.MIDDLE,content:v});else{var _=e[h].marker,f=new google.maps.Size(44,56);window.devicePixelRatio>1.5&&e[h].retinaMarker&&(_=e[h].retinaMarker,f=new google.maps.Size(44,56));var y={url:_,size:f,scaledSize:new google.maps.Size(44,56)};z=new google.maps.Marker({position:new google.maps.LatLng(e[h].lat,e[h].lng),map:a,icon:y,title:e[h].title.replace(/\&[\w\d\#]{2,5}\;/g,function(e){return F[e]}),animation:google.maps.Animation.DROP,visible:!0})}o.extend(z.getPosition());var w=document.createElement("div");w.className="map-info-window";var I="";I+='<div class="item-wrap">',I+='<div class="item-header">',e[h].thumbnail?I+='<a class="hover-effect" href="'+e[h].url+'"><img class="img-fluid listing-thumbnail" src="'+u+'" data-src="'+e[h].thumbnail+'" alt="'+e[h].title+'"/></a>':I+='<a class="hover-effect" href="'+e[h].url+'"><img class="img-fluid listing-thumbnail" src="'+u+'" alt="'+e[h].title+'"/></a>',I+="</div>",I+='<div class="item-body flex-grow-1">',I+='<h2 class="item-title">',I+='<a href="'+e[h].url+'">'+e[h].title+"</a>",I+="</h2>",I+='<ul class="list-unstyled item-info">',e[h].price&&(I+='<li class="item-price">'+e[h].price+"</li>"),e[h].property_type&&(I+='<li class="item-type">'+e[h].property_type+"</li>"),I+="</ul>",I+="</div>",I+="</div>",w.innerHTML=I,d(a,z,new google.maps.InfoWindow({content:w})),0!=c&&m.addMarker(z),n.push(z)}if(a.fitBounds(o),0!=l){var x={ignoreHidden:!0,maxZoom:parseInt(p),styles:[{url:s,height:48,width:48,textColor:"#ffffff"}]};i=new MarkerClusterer(a,n,x)}};if(houzez_map_properties.length>0)U(houzez_map_properties,a);else{O={center:new google.maps.LatLng(Z,C),zoom:10,maxZoom:16,styles:h,disableDefaultUI:!0,scrollwheel:!1};a=new google.maps.Map(document.getElementById("houzez-properties-map"),O),jQuery(".houzez-map-loading").hide()}var G=function(){return e("#half-map-listing-area .item-wrap").each(function(o){e(this).on("mouseenter",function(){a&&(n[o].getMap()||0==l||(i.setMaxZoom(1),i.repaint()),google.maps.event.trigger(n[o],"click"))})}),e("#half-map-listing-area .item-wrap").on("mouseleave",function(){t(),0!=l&&(i.setMaxZoom(13),i.repaint())}),!1};N||G();var Y=function(o){var t=e("#houzez_ajax_container"),i=e("#half-map-listing-area .page-title span"),n=e(".houzez-search-form-js"),r=e("#ajax_sort_properties").val(),s=e(".listing-view").data("layout");return e(this).parents(".houzez-search-form-js").addClass("sdfsdfsdffs"),e.ajax({type:"GET",dataType:"json",url:z,data:n.serialize()+"&action=houzez_half_map_listings&paged="+o+"&sortby="+r+"&item_layout="+s,beforeSend:function(){e(".houzez-map-loading").show(),t.empty().append('<div id="houzez-map-loading" class="houzez-map-loading"><div class="mapPlaceholder"><div class="loader-ripple spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div></div>')},success:function(o){var n;return""!=o.query&&e('input[name="search_args"]').val(o.query),e(".map-notfound").remove(),e(".search-no-results-found").remove(),e(".houzez-map-loading").hide(),!0===o.getProperties?($(),q(),U(o.properties,a),Q(),t.empty().html(o.propHtml),i.empty().html(o.total_results),K(),houzez_init_add_favorite(z,_),houzez_init_remove_favorite(z,_),houzez_listing_lightbox(z,w,y,_),n=houzezGetCookie("houzez_compare_listings"),add_to_compare(I,x,b,M,k,T,n,4),remove_from_compare(n,x,b,M,k),N||G(),e('[data-toggle="tooltip"]').tooltip()):($(),q(),e("#houzez-properties-map").append('<div class="map-notfound">'+f+"</div>"),t.empty().html('<div class="search-no-results-found">'+f+"</div>"),i.empty().html(o.total_results)),!1},error:function(e,a,o){console.log(e.status),console.log(e.responseText),console.log(o)}}),!1},J=function(e){$(),Y(e)},K=function(){return e(".houzez_ajax_pagination a").on("click",function(a){a.preventDefault(),d=e(this).data("houzepagi"),J(d)}),!1};K();e("#ajax_sort_properties").on("change",function(){J(d=0)});var V=function(a,o){if(e(".price-range").slider({range:!0,min:a,max:o,values:[a,o],slide:function(a,o){if("after"==A)var t=W(o.values[0])+B,i=W(o.values[1])+B;else t=B+W(o.values[0]),i=B+W(o.values[1]);e(".min-price-range-hidden").val(o.values[0]),e(".max-price-range-hidden").val(o.values[1]),e(".min-price-range").text(t),e(".max-price-range").text(i)},stop:function(e,a){J(d=0)}}),"after"==A)var t=W(e(".price-range").slider("values",0))+B,i=W(e(".price-range").slider("values",1))+B;else t=B+W(e(".price-range").slider("values",0)),i=B+W(e(".price-range").slider("values",1));e(".min-price-range").text(t),e(".max-price-range").text(i),e(".min-price-range-hidden").val(e(".price-range").slider("values",0)),e(".max-price-range-hidden").val(e(".price-range").slider("values",1))};if(e(".price-range").length>0&&1==S)e(".status-js").val()==L?V(D,P):V(E,j),e(".status-js").on("change",function(){e(this).val()==L?V(D,P):V(E,j)});e("#radius-range-slider").length>0&&(te=H,e("#radius-range-slider").slider({value:te,min:0,max:100,step:1,value:e("#radius-range-value").data("default"),slide:function(a,o){e("#radius-range-text").html(o.value),e("#radius-range-value").val(o.value)},stop:function(a,o){e("#houzez-properties-map").length>0&&J(d=0)}}),e("#radius-range-text").html(e("#radius-range-slider").slider("value")),e("#radius-range-value").val(e("#radius-range-slider").slider("value"))),e("select.houzez_search_ajax, input.houzez_search_ajax").on("change",function(){J(d=0)}),e(".half-map-wrap").length>0&&e(".btn-apply, .half-map-search-js-btn, #auto_complete_ajax").on("click",function(e){e.preventDefault(),J(d=0)})}if(e("#houzez-btn-map-view").on("click",function(o){o.preventDefault(),e("#half-map-listing-area, .listing-wrap").hide(),e("#map-view-wrap").show(),google.maps.event.trigger(a,"resize"),Q()}),e("#houzez-btn-listing-view").on("click",function(a){a.preventDefault(),e("#map-view-wrap").hide(),e("#half-map-listing-area, .listing-wrap").show()}),e(".hz-map-field-js").length>0){var X=houzez_vars.geo_country_limit,ee=houzez_vars.geocomplete_country,ae=function(e){this.$container=e};ae.prototype={init:function(){this.initDomElements(),this.autocomplete()},initDomElements:function(){this.addressField=this.$container.data("address-field")},autocomplete:function(){var e=this,a=this.addressField;if(null!==a){var o=document.getElementById(a),t=new google.maps.places.Autocomplete(o,{types:["geocode","establishment"]});0!=X&&""!=ee&&("UAE"==ee&&(ee="AE"),t.setComponentRestrictions({country:[ee]})),google.maps.event.addListener(t,"place_changed",function(){var a=t.getPlace(),o=new google.maps.LatLng(a.geometry.location.lat(),a.geometry.location.lng());if(e.updateCoordinate(o),S){J(0)}})}},updateCoordinate:function(a){e('input[name="lat"]').val(a.lat()),e('input[name="lng"]').val(a.lng())}};var oe=function(){var a=e(this);new ae(a).init()};e(".hz-map-field-js").each(oe)}}var te,ie});